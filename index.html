<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yetkili Alƒ±m Sistemi</title>
<style>
body {
  background:#020617;
  color:#e5e7eb;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.box {
  background:#0f172a;
  padding:25px;
  width:420px;
  border-radius:10px;
}
h2 { text-align:center; }
input, textarea, select, button {
  width:100%;
  margin-top:10px;
  padding:8px;
  border:none;
  border-radius:5px;
}
button {
  background:#2563eb;
  color:white;
  cursor:pointer;
}
button:hover { background:#1d4ed8; }
.hidden { display:none; }
.card {
  background:#020617;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
}
.status {
  font-size:13px;
  margin-top:5px;
}
</style>
</head>
<body>

<div class="box" id="formBox">
<h2>Yetkili Ba≈üvurusu</h2>
<input id="name" placeholder="Ad / Kullanƒ±cƒ± Adƒ±">
<input id="discord" placeholder="Discord">
<input id="age" type="number" placeholder="Ya≈ü">
<select id="role">
<option value="">Yetki Se√ß</option>
<option>Rehber</option>
<option>Moderat√∂r</option>
<option>Admin</option>
</select>
<textarea id="why" placeholder="Neden seni se√ßmeliyiz?"></textarea>
<button onclick="submitForm()">G√∂nder</button>
<button onclick="openAdmin()">Admin Panel</button>
</div>

<div class="box hidden" id="adminBox">
<h2>Admin Panel</h2>
<div id="list"></div>
<button onclick="closeAdmin()">Geri</button>
</div>

<script>
const WEBHOOK_URL = "BURAYA_DISCORD_WEBHOOK";

function submitForm() {
  let data = {
    name: name.value,
    discord: discord.value,
    age: age.value,
    role: role.value,
    why: why.value,
    status: "Beklemede"
  };

  let apps = JSON.parse(localStorage.getItem("apps") || "[]");
  apps.push(data);
  localStorage.setItem("apps", JSON.stringify(apps));

  if (WEBHOOK_URL !== "BURAYA_DISCORD_WEBHOOK") {
    fetch(WEBHOOK_URL, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({
        content:`üì• Yeni Yetkili Ba≈üvurusu\nüë§ ${data.name}\nüéØ ${data.role}\nüí¨ ${data.why}`
      })
    });
  }

  alert("Ba≈üvuru g√∂nderildi");
  document.querySelectorAll("input,textarea").forEach(e=>e.value="");
}

function openAdmin() {
  let pass = prompt("Admin ≈ûifresi:");
  if (pass !== "admin123") return;
  formBox.classList.add("hidden");
  adminBox.classList.remove("hidden");
  render();
}

function closeAdmin() {
  adminBox.classList.add("hidden");
  formBox.classList.remove("hidden");
}

function render() {
  let apps = JSON.parse(localStorage.getItem("apps") || "[]");
  list.innerHTML = "";
  apps.forEach((a,i)=>{
    list.innerHTML += `
    <div class="card">
      <b>${a.name}</b> (${a.role})
      <div>${a.discord} | ${a.age}</div>
      <div>${a.why}</div>
      <div class="status">Durum: ${a.status}</div>
      <button onclick="setStatus(${i},'Onaylandƒ±')">Onayla</button>
      <button onclick="setStatus(${i},'Reddedildi')">Reddet</button>
    </div>`;
  });
}

function setStatus(i,s) {
  let apps = JSON.parse(localStorage.getItem("apps"));
  apps[i].status = s;
  localStorage.setItem("apps", JSON.stringify(apps));
  render();
}
</script>

</body>
</html>
